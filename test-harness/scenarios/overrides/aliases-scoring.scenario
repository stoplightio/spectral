====test====
Respect overrides with aliases and scoring
====asset:spectral.js====
const { DiagnosticSeverity } = require('@stoplight/types');
const { pattern } = require('@stoplight/spectral-functions');

module.exports = {
  aliases: {
    Info: ['$.info'],
  },
  rules: {
    'description-matches-stoplight': {
      message: 'Description must contain Stoplight',
      given: '#Info',
      recommended: true,
      severity: DiagnosticSeverity.Error,
      then: {
        field: 'description',
        function: pattern,
        functionOptions: {
          match: 'Stoplight',
        },
      },
    },
    'title-matches-stoplight': {
      message: 'Title must contain Stoplight',
      given: '#Info',
      then: {
        field: 'title',
        function: pattern,
        functionOptions: {
          match: 'Stoplight',
        },
      },
    },
    'contact-name-matches-stoplight': {
      message: 'Contact name must contain Stoplight',
      given: '#Info.contact',
      recommended: false,
      then: {
        field: 'name',
        function: pattern,
        functionOptions: {
          match: 'Stoplight',
        },
      },
    },
  },
  overrides: [
    {
      files: [`**/*.json`],
      rules: {
        'description-matches-stoplight': 'error',
        'title-matches-stoplight': 'warn',
      },
    },
    {
      files: [`v2/**/*.json`],
      rules: {
        'description-matches-stoplight': 'info',
        'title-matches-stoplight': 'hint',
      },
    },
  ],
};
====asset:scoring-config.json====
{
  "scoringSubtract":
    {
      "error":
        {
          "1":55,
          "2":65,
          "3":75,
          "6":85,
          "10":95
        },
     "warn":
        {
          "1":3,
          "2":7,
          "3":10,
          "6":15,
          "10":18
        }
    },
  "scoringLetter":
    {
      "A": 75,
      "B": 65,
      "C": 55,
      "D": 45,
      "E": 0
    },
  "threshold": 50,
  "onlySubtractHigherSeverityLevel": true,
  "uniqueErrors": false
}
====asset:v2/document.json====
{
  "info": {
    "description": "",
    "title": "",
    "contact": {
      "name": ""
    }
  }
}
====asset:legacy/document.json====
{
  "info": {
    "description": "",
    "title": "",
    "contact": {
      "name": ""
    }
  }
}
====command====
{bin} lint **/*.json --ruleset {asset:spectral.js} --fail-on-unmatched-globs --scoring-config "{asset:scoring-config.json}"
====stdout====

{asset:legacy/document.json}
 3:20    error  description-matches-stoplight  Description must contain Stoplight  info.description
 4:14  warning  title-matches-stoplight        Title must contain Stoplight        info.title

{asset:v2/document.json}
 3:20  information  description-matches-stoplight  Description must contain Stoplight  info.description
 4:14         hint  title-matches-stoplight        Title must contain Stoplight        info.title

✖ 4 problems (1 error, 1 warning, 1 info, 1 hint)
✖ SCORING: E (42%)
✖ FAILED!
