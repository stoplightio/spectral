# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [4.2.0] - 2019-10-08

### Features
- CLI: glob patterns and multiple paths are allowed [#534](https://github.com/stoplightio/spectral/issues/534)
- CLI: control fail severity and result display [#368](https://github.com/stoplightio/spectral/issues/368)
- CLI: new formatter - JUnit [#478](https://github.com/stoplightio/spectral/issues/478)
- CLI: add possibility to proxy requests [#446](https://github.com/stoplightio/spectral/issues/446)
- Built-in ruleset formats targeting JSON Schema files [#571](https://github.com/stoplightio/spectral/issues/571)
- `{{value}}` and `{{path}}` can be used in messages [#520](https://github.com/stoplightio/spectral/issues/520) [#572](https://github.com/stoplightio/spectral/issues/572)

### Deprecated
- `when` Rule property is deprecated [#585](https://github.com/stoplightio/spectral/issues/585) 

### Changed
- Validation results produced by `alphabetical` function are more meaningful [#613](https://github.com/stoplightio/spectral/pull/613)
- Enhanced JSON Schema enum validation [#579](https://github.com/stoplightio/spectral/pull/579) 
- Improved messages generated by `oasPathParam` function [#537](https://github.com/stoplightio/spectral/issues/537) 
- CLI: the amount of enabled rules is now displayed if you run Spectral with `--verbose` flag [#435](https://github.com/stoplightio/spectral/issues/435)
- Stricter source matching for errors [#615](https://github.com/stoplightio/spectral/pull/615)

### Fixed
- `schema` function can validate falsy values [10e5d1c](https://github.com/stoplightio/spectral/commit/10e5d1c0262790ad8349e25b2e5517e7ae15402c)
- `schema` function can validate Draft 6 and Draft 7 JSON Schemas [ea2ddff](https://github.com/stoplightio/spectral/commit/ea2ddffd58a2a92f483147fec195e0a8fe80c07b)
- Parameters in links objects are not linted for not having a description property. [#272](https://github.com/stoplightio/spectral/issues/272)
- More accurate ranges for errors occurring in referenced files [6986b82](https://github.com/stoplightio/spectral/commit/6986b82bee725aa8733c2d07ccc65a99e14c22c6)
- CLI: stylish formatter reports `info` and `hint` severity levels correctly [#565](https://github.com/stoplightio/spectral/issues/565)

## [4.1.1] - 2019-09-05

### Fixed
CLI: missing tslib [#524](https://github.com/stoplightio/spectral/issues/524)

## [4.1.0] - 2019-09-04

### Added
- Rulesets can be loaded using `Spectral#loadRuleset` method
- Custom functions can be registered directly in rulesets
- Rulesets can be registered against document format
- New rules: no-$ref-siblings, oas2-anyOf, oas2-oneOf
- YAML's [merge keys](https://yaml.org/type/merge.html) are supported
- $refs can be used in rulesets
- Resolved document is accessible now if you use `Spectral#runWithResolved` method [#398](https://github.com/stoplightio/spectral/issues/398)

### Changed
- valid-example rule has been broken into smaller, more specific rules [#223](https://github.com/stoplightio/spectral/issues/223)
- YAML scalar values are parsed according to YAML 1.2 spec [#481](https://github.com/stoplightio/spectral/issues/481)
- We swapped oclif with yargs

### Deprecated
- `addRules` and `addFunctions` have been deprecated, use `setRules` and `setFunctions` instead
- Importing built-in ruleset in cjs/esm module way (via require or import) is no longer recommended. Consider using `#loadRuleset` instead

### Fixed
- CLI: relative paths to documents are supported [#474](https://github.com/stoplightio/spectral/issues/474)
- Improved path and ranges generation [#458](https://github.com/stoplightio/spectral/pull/458), [#459](https://github.com/stoplightio/spectral/pull/459)
- Unknown schema formats are no longer printed [#396](https://github.com/stoplightio/spectral/issues/396)
- Graceful handling of circular rulesets
- A few other minor issues

## [4.0.3] - 2019-08-26
### Fixed

- Resolve references to files with relative paths 

## [4.0.2] - 2019-07-31
### Fixed

- Tweaked JSON Path lookup for paths to avoid deep scan, speeding up linting for large documents [#413](https://github.com/stoplightio/spectral/pull/413)

## [4.0.1] - 2019-07-16
### Fixed

- NPM install for Windows users was failing due to a dependency not supporting Windows in their build script

## [4.0.0] - 2019-07-09
### Added

- Using the CLI with multiple, custom rulesets
- New syntax for rulesets, including overriding rules and extending rulesets
- More friendly errors and warnings
- CLI `--quiet` flag added to lint command, removing any output other than results
- CLI `--skip-rules` flag added to lint command, to ignore certain rules

### Changed

- CLI now reports errors and warnings for referenced (`$ref`) files

### Removed

- Configuration files were briefly available in 3.x but removed in v4.0
- CLI `--max-results` flag is removed
